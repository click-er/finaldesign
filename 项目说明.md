## 项目说明

### 首页

首页想要在原本对话框的基础上，新增核销入口和注册入口

#### 登陆（/login，get）

登陆所需要发的JSON

| phoneNumber | 电话号码（作为登陆账号） |
| ----------- | ------------------------ |
| password    | 密码                     |

在登陆操作后，会返回一个消息模型（所有返回的消息模型内容一致）

| code   | 消息代码（0-失败，1-成功）     |
| ------ | ------------------------------ |
| msg    | 消息内容（描述操作成功或失败） |
| object | 返回的对象                     |

若成功，则code=1，msg为描述信息，可提取显示，object则为返回的一个对象

失败则code=0，object=null



```json
{
    "code":1,
    "msg":"登陆成功",
    "object":{
        "phoneNumber":"String类型的电话号码",
        "username":"用户名称",
        "idNumber":"身份证号",
        "token":"token，后续普通用户进行请求都需要带上token"
    }
}
```



#### 注册(/register，post)

注册需要发送一个对象，直接用json包装一下四个

需要前端做正则表达式，以及表单认证（不为空），电话号码11位纯数字，身份证18位（如果你能把最后一位可识别为X更好）

| username    | 用户名     |
| ----------- | ---------- |
| password    | 密码       |
| phoneNumber | 电话号码   |
| idNumber    | 身份证号码 |

同样，在注册成功或失败后，都会返回一个消息模型，0失败，1成功，同时会带有msg信息描述

无论成功或失败，在弹出提示框点击确认后，需要跳转回登陆界面



### 主办方

主办方的业务有两大块，一上传演唱会信息，二检票（此部分单独一个模块）

此部分不需要token进行鉴权

#### 上传演唱会信息（/per/uploadlist，post）

此模块需要前端上传两个对象

包装形式：

```json
{
    "performance":{
        "name":"演唱会名字",
        "starttime":"开始购票时间",
        "endtime":"结束购票时间",
        "playtime":"演出开始时间"
    },
    
    "ticketInfo":{
        "price_1":价格1,
        "count_1":数量1,
        "price_2":价格2,
        "count_2":数量2,
        "price_3":价格3,
        "count_3":数量3,
        "price_4":价格4,
        "count_4":数量4,
        "price_5":价格5,
        "count_5":数量5,
        
    }
}
```



其中ticketInfo部分，前端应实现需要多少种票价类型就给多少框的选择，最少1个，最多5个。即，price_1,count_1是必须的回后端，其余为视需要可选

以上变量类型均为整型，价格、数量最多4位数



对于performance部分而言，3个时间的类型为Datetime，即"yyyy-MM-dd HH:mm:ss"，前端应实现可选时间的选择，当然，若可选择的时间不能早于系统时间则最好



### 购票

在用户登陆进系统后，右上角搞个圆圈通用头像也行，右上角必须显示用户名称

此部分都需要token鉴权

#### 展示全部演出信息（/per/showlist，get）

在进入系统后，即可请求显示当前演出信息，无需参数直接请求即可

返回一个消息模型

```json
{
    "code":1,
    "msg":"查询成功",
    "object":{
        List数组
         单个内容:{
        "code":"演出代码",
        "name":"演唱会名字",
        "starttime":"开始购票时间",
        "endtime":"结束购票时间",
        "playtime":"演出开始时间"
    	}
    }
}
```

在前端则需要展示一项一项数据，每一项需要显示演出名字，购票开始时间，购票结束时间，演出时间



#### 展示票价信息（/tic/showTicket，get）

**PS：若购票开始时间未到，则购票按钮应处于不可用状态**

在点进其中一项后，则需要向后端发送当前选中演出的code（String类型），进行票价的查询

将回复前端一个消息模型

其中object为一TicketInfo的一个实体对象

```json
{
    "code":1,
    "msg":"查询成功",
    "object":{
        "ticketInfo":{
        "price_1":价格1,
        "count_1":数量1,
        "price_2":价格2,
        "count_2":数量2,
        "price_3":价格3,
        "count_3":数量3,
        "price_4":价格4,
        "count_4":数量4,
        "price_5":价格5,
        "count_5":数量5,
       
    }
    }
}
```

同上传时的一致，其中，若票已售罄，即count为0，此时不可再买此类型票

若没有对应的票价或数量，则对应项为null

#### 正式购票（/book，post）

在按下购票按钮后，应弹出一个提示框，询问是否以当前身份（显示身份证号码）购买一张票

确认后，前端需要向后端发送演出代码code（String）,身份证号码idNumber（String），票价ticketPrice（int），票价类型type（int）

最多5种票价，依次对应type=1、2、3、4、5

购票后则返回一个消息对象，仅描述成功与否



### 检票

此部分不需要token鉴权

在登陆页做一个入口进行检票即可

**首先选择需要检票的场次**

无需参数，直接请求（/showCheckList，get）

将返回一个消息模型

```json
{
    "code":1,
    "msg":"描述",
    "object":{
        一个List数组
        单个数组元素{
            "code":"演出代码",
            "name":"演唱会名字",
            "starttime":null,
            "endtime":null,
            "playtime":null
    	}
    }
    
}
```

前端应实现一个选择的功能

显示所有的演出名字，并选择其中一个后，开始**正式检票流程**

客户输入身份证号码，前端接收，向后端（/check，get）发送code（String），id_number（String）

在检票后，将返回一个消息模型，记录认证成功与否







**如果前面有地方不能以写定方式回参，后端可以将其修改为对象，统一用json回**













